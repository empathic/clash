meta:
  name: v2 interactive tool passthrough â€” AskUserQuestion bypasses policy allow
  description: >
    Interactive tools like AskUserQuestion require Claude Code's native UI.
    When the policy allows them, the hook returns no decision (passthrough)
    so Claude Code presents the interactive prompt. Deny decisions are still
    enforced.

clash:
  policy_sexpr: |
    (default deny "main")
    (policy "main"
      (allow (tool)))

steps:
  - name: AskUserQuestion passthrough when allowed by policy
    hook: pre-tool-use
    tool_name: AskUserQuestion
    tool_input:
      questions:
        - question: "Which approach?"
          options:
            - label: "Option A"
              description: "First option"
            - label: "Option B"
              description: "Second option"
    expect:
      no_decision: true

  - name: Other tools still get allow decision
    hook: pre-tool-use
    tool_name: Task
    tool_input:
      prompt: "do something"
    expect:
      decision: allow

  - name: Skill tool still gets allow decision
    hook: pre-tool-use
    tool_name: Skill
    tool_input:
      skill: "commit"
    expect:
      decision: allow
