[meta]
name = "all hook types"
description = "Test that all hook event types are handled correctly"

[settings.user]
permissions.allow = ["Bash(git:*)"]
permissions.deny = ["Bash(rm:*)"]

[[step]]
name = "pre-tool-use allow"
hook = "pre-tool-use"
tool_name = "Bash"
tool_input = { command = "git status" }

[step.expect]
decision = "allow"

[[step]]
name = "pre-tool-use deny"
hook = "pre-tool-use"
tool_name = "Bash"
tool_input = { command = "rm -rf /" }

[step.expect]
decision = "deny"

[[step]]
name = "post-tool-use continues"
hook = "post-tool-use"
tool_name = "Bash"
tool_input = { command = "git status" }

[step.expect]
no_decision = true
exit_code = 0

[[step]]
name = "notification continues"
hook = "notification"
message = "Claude needs permission to use Bash"
notification_type = "permission_prompt"

[step.expect]
no_decision = true
exit_code = 0
