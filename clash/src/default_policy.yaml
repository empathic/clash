# Clash policy — deny-all default for new users.
#
# Everything is blocked except reading files in your project.
# Use "clash allow editing", "clash allow commands", or "clash allow web"
# to unlock capabilities as you need them.
#
# For full rule syntax, run "clash policy add-rule --help".
#
# Note: clash always injects two built-in profiles:
#   __clash_internal__ — allows clash to read/write its own config
#   __claude_internal__ — allows Claude Code meta-tools (AskUserQuestion,
#                         ExitPlanMode, task management, etc.)

default:
  permission: deny
  profile: main

profiles:
  cwd-read:
    rules:
      allow read *:
        fs:
          read: subpath(.)

  main:
    include: [cwd-read]
    rules:
      # Add rules here with "clash allow <preset>" or "clash policy add-rule"
