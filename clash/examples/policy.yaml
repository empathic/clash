# Clash policy for Eliot's dev environment.
#
# Evaluation: all matching statements are collected, then precedence applies:
#   deny > ask > allow
# If no statement matches, the default effect is used.

default:
  permission: ask
  profile: research

profiles:
  safe-ssh:
    rules:
      deny * *:
        fs:
          read + write: subpath(~/.ssh)
  
  safe-read:
    rules:  
      allow safe-read *:

  research:
    include: [safe-ssh, safe-read]
    rules:
      allow bash *:
        args: ["!-delete"]
        fs:
          read: "!regex(\\./)" # no hidden files
      allow read *:
        fs:
          read: "!(regex(\\./))"
  
